<h1 style="color:red; text-align:center;">系统功能描述</h1>

## 一些重要的说明
小程序服务器地址： https://59409502.qcloud.la, （139.199.186.170）


## 用户身份管理
小程序平台的用户可以分为两种：`患者`和`医保医师`，默认进入小程序的所有用户都是`患者`身份，如果用户同时是`医保医师`身份，他可以在我的`设置-用户身份`菜单切换成`医保医师`身份。`医保医师`身份是系统管理员根据其提交上来的资料在后台设定的。

用户首次切换至`医保医师`身份时，弹出一个对话框（或者页面）让用户输入`姓名`和`医生编号`，提交到后台待系统管理员审核。第二次及此后的切换则不用弹出以上对话框而直接加入`医保医师`界面。

`患者`身份的用户还可以通过提交`特殊门诊慢性病证`来开通特殊门诊功能模块的权限,需要提交的资料如下：
> 1. 身份证正反面照片
> 2. 特殊门诊慢性病证信息页面照片

用户提交上来的`身份证`照片和`特殊门诊慢性病证`照片在后台通过两种方式进行识别：**客服人工审核** 和 **ocr信息提取及匹配审核**, 经确认为同一人后，从`mainapp.Patient`中查找对应的患者对象与`mainapp.User`中对应的微信用户建立关联关系，如果在`mainapp.Patient`中找不到患者信息，则表示患者不在本系统的管辖范围内，返回说明告知用户。

### 医师身份认证管理
后台为每个医师生成一个唯一的16位认证码，并且在认证码字段上建立索引。后台管理人员把给`认证码`告知医师，医师从小程序端填入改`认证码`发送到后台服务器，后台服务器找到对应的`认证码`则认证通过，把对应的医师身份赋予改小程序用户。

### 用户进入小程序的流程图

```flow
st=>start: Start
e=>end
op1=>operation: 获取用户信息 
cond_role=>condition: role=doctor or No?
doc_page=>operation: 医生界面
pat_page=>operation: 患者界面
st->op1->cond_role
cond_role(yes)->doc_page->e
cond_role(no)->pat_page->e

```

## 医师在线
患者可以通过e讯通给自己的主治医师发微信询问病情，可以文字语言和图片描述自己的病情，医师团队为患者提供医疗在线咨询服务。

## 体检管理
体检报告管理/历年报告对比和健康趋势分析/查看体检影像科图片/

和体检中心对接，体检中心把报告上传至平台

## 慢病管理-主治医师查询
查看医保医师的简介,每个医师生成一个页面，医师可以维护自己的页面。

## 慢病管理-病种查询

## 慢病管理-慢药拿药历史查询

## 慢病管理-慢病病情记录
患者可以手动输入健康数据，也可以选择自动获取健康数据。自动获取需要与相关设备蓝牙链接。


```uml
participant 客户端
participant 服务器
participant 通行证中心
Note over 客户端: 用户输入通行证的账号、密码
客户端->通行证中心: 发送账号、密码
Note over 通行证中心: 验证账号、密码
通行证中心-->>客户端: 返回token
客户端->服务器: 发送token
服务器->通行证中心: 验证token
通行证中心-->>服务器: 验证成功
服务器-->>客户端: 登陆成功

```
